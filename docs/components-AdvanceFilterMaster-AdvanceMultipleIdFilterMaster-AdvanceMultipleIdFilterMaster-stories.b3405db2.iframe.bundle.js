"use strict";(self.webpackChunkreact_3layer_ui_components=self.webpackChunkreact_3layer_ui_components||[]).push([[7258],{"./src/services/common-service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>CommonService});var react=__webpack_require__("./node_modules/react/index.js"),Subscription=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscription.js");class TreeNode{constructor(value){value?(this.key=value.id,this.item={...value},this.children=[],this.title=value.name,this.disabled=value.disabled):(this.title="",this.key=null,this.children=[],this.item={},this.disabled=!1)}}var dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min);const CommonService={useSubscription(){const subscription=react.useRef(new Subscription.yU).current;return react.useEffect((function(){return function cleanup(){subscription.unsubscribe()}}),[subscription]),[subscription]},useClickOutside(ref,callback){const handleClickOutside=react.useCallback((event=>{ref?.current&&!ref?.current?.contains(event.target)&&callback()}),[callback,ref]);react.useEffect((()=>(document.addEventListener("mousedown",handleClickOutside),function cleanup(){document.removeEventListener("mousedown",handleClickOutside)})),[callback,handleClickOutside,ref])},useClickOutsideMultiple(refFirst,ref,callback){const handleClickOutside=react.useCallback((event=>{refFirst?.current&&!refFirst?.current?.contains(event.target)&&(ref.current&&ref.current.contains(event.target)||callback())}),[callback,ref,refFirst]);react.useEffect((()=>(document.addEventListener("mousedown",handleClickOutside),function cleanup(){document.removeEventListener("mousedown",handleClickOutside)})),[callback,handleClickOutside,ref])},toDayjsDate:date=>dayjs_min_default()(date),isEmpty(obj){for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0},limitWord(input,max){if(input?.length>max){return(input=input.slice(0,max))+"..."}return input},useStateCallback(initialState){const[state,setState]=react.useState(initialState),cbRef=react.useRef(null),setStateCallback=react.useCallback(((state,cb)=>{cbRef.current=cb,setState(state)}),[]);return react.useEffect((()=>{cbRef.current&&(cbRef.current(state),cbRef.current=null)}),[state]),[state,setStateCallback]},uniqueArray:array=>array.reduce(((acc,current)=>acc.find((item=>item.id===current.id))?acc:acc.concat([current])),[]),arrayMove(arr,fromIndex,toIndex){var element=arr[fromIndex];arr.splice(fromIndex,1),arr.splice(toIndex,0,element)},buildTree(listItem,parent,keyNodes,tree){tree=void 0!==tree?tree:[],parent=void 0!==parent?parent:new TreeNode,keyNodes=void 0!==keyNodes?keyNodes:[];var children=listItem.filter((child=>child.parentId===parent.key)).map((currentItem=>new TreeNode(currentItem)));return children&&children.length&&(null===parent.key?tree=children:(parent.children=children,keyNodes.push(parent.key)),children.forEach((child=>{this.buildTree(listItem,child,keyNodes)}))),[tree,keyNodes]},listToTree(list){var node,i,map={},roots=[];for(i=0;i<list.length;i+=1)map[list[i].id]=i,list[i].children=[];for(i=0;i<list.length;i+=1)null!==(node=list[i]).parentId?list[map[node.parentId]].children.push(node):roots.push(node);return roots},setDisabledNode(nodeId,tree){var filteredNode=tree.filter((currentNode=>currentNode.key===nodeId))[0];if(filteredNode){let index=tree.indexOf(filteredNode);tree[index].disabled=!0,filteredNode.children&&filteredNode.children.length>0&&filteredNode.children.forEach((currentChildren=>{this.setDisabledNode(currentChildren.key,filteredNode.children)}))}else tree.forEach((currentTree=>{currentTree.children&&currentTree.children.length>0&&this.setDisabledNode(nodeId,currentTree.children)}))},setOnlySelectLeaf(tree){tree&&tree.length&&tree.forEach((currentNode=>{currentNode.item.hasChildren?(currentNode.disabled=!0,this.setOnlySelectLeaf(currentNode.children)):currentNode.disabled=!1}))}}},"./src/components/AdvanceFilterMaster/AdvanceMultipleIdFilterMaster/AdvanceMultipleIdFilterMaster.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_3layer_advance_filters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-3layer-advance-filters/dist/index.js"),react_3layer_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-3layer-common/index.js"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),_AdvanceMultipleIdFilterMaster__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/AdvanceFilterMaster/AdvanceMultipleIdFilterMaster/AdvanceMultipleIdFilterMaster.tsx"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const demoObservable=new rxjs__WEBPACK_IMPORTED_MODULE_6__.c((observer=>{setTimeout((()=>{observer.next([{id:4,name:"Ban hành chính",code:"FAD"},{id:1,name:"Ban công nghệ thông tin Ban công nghệ thông tin",code:"FIM"},{id:2,name:"Ban nhân sự",code:"FHR"},{id:3,name:"Ban tài chính",code:"FAF"},{id:5,name:"Ban đời sống",code:"DSS"},{id:6,name:"Ban nội vụ",code:"DUH"},{id:7,name:"Ban lao động",code:"FJIP"},{id:8,name:"Ban thể thao",code:"FJUI"}])}),1e3)})),list=[{id:9,name:"Phòng Muti Media",code:"MEDIA"},{id:10,name:"Phòng truyền thông",code:"PTT"}];class DemoFilter extends react_3layer_common__WEBPACK_IMPORTED_MODULE_2__.y_{id=new react_3layer_advance_filters__WEBPACK_IMPORTED_MODULE_1__.s_;name=new react_3layer_advance_filters__WEBPACK_IMPORTED_MODULE_1__.Kp;code=new react_3layer_advance_filters__WEBPACK_IMPORTED_MODULE_1__.Kp}(new DemoFilter).id.in=[10,9,4,6];const demoSearchFunc=TModelFilter=>demoObservable,__WEBPACK_DEFAULT_EXPORT__={title:"AdvanceFilterMaster/AdvanceMultipleIdFilterMaster",component:_AdvanceMultipleIdFilterMaster__WEBPACK_IMPORTED_MODULE_3__.A,tags:["autodocs"],parameters:{controls:{expanded:!0},docs:{page:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.hE,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.Pd,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.VY,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.Tn,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.VY,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.uY,{story:_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.h1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_4__.om,{})]})}},args:{label:"Đơn vị tổ chức",placeHolder:"Chọn đơn vị",maxLength:200,maxLengthItem:30},argTypes:{label:{control:"text"},placeHolder:{}}},Template=args=>{const[filter,setFilter]=react__WEBPACK_IMPORTED_MODULE_0__.useState(new DemoFilter);react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{const subscription=new rxjs__WEBPACK_IMPORTED_MODULE_7__.yU;return filter.id.in||setFilter({...filter,id:{in:[10,9,4,6]}}),function cleanup(){subscription.unsubscribe()}}),[filter]);const handleChangeFilter=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((listItemm,ids)=>{setFilter({...filter,id:{in:ids}})}),[filter]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{style:{margin:"10px",width:"250px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_AdvanceMultipleIdFilterMaster__WEBPACK_IMPORTED_MODULE_3__.A,{...args,values:filter?.id?.in,classFilter:DemoFilter,searchProperty:"name",onChange:handleChangeFilter,getList:demoSearchFunc,preferOptions:list})})};Template.displayName="Template";const Default=Template.bind({}),__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'args => {\n  const [filter, setFilter] = React.useState(new DemoFilter());\n  React.useEffect(() => {\n    const subscription = new Subscription();\n    if (!filter.id.in) {\n      setFilter({\n        ...filter,\n        id: {\n          in: [10, 9, 4, 6]\n        }\n      });\n    }\n    return function cleanup() {\n      subscription.unsubscribe();\n    };\n  }, [filter]);\n  const handleChangeFilter = React.useCallback((listItemm, ids) => {\n    setFilter({\n      ...filter,\n      id: {\n        in: ids\n      }\n    });\n  }, [filter]);\n  return /*#__PURE__*/_jsx("div", {\n    style: {\n      margin: "10px",\n      width: "250px"\n    },\n    children: /*#__PURE__*/_jsx(AdvanceMultipleIdFilterMaster, {\n      ...args,\n      values: filter?.id?.in,\n      classFilter: DemoFilter,\n      searchProperty: "name",\n      onChange: handleChangeFilter,\n      getList: demoSearchFunc,\n      preferOptions: list\n    })\n  });\n}',...Default.parameters?.docs?.source}}}}}]);